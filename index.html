function renderTable(headers, dataRows) {
  const tableContainer = document.getElementById('table-container');
  const table = document.createElement('table');
  table.setAttribute('id', 'csvTable');

  const headerRow = document.createElement('tr');
  headers.forEach((header, colIndex) => {
    if (colIndex === 0) return; // Hide the first column
    const th = document.createElement('th');
    th.textContent = header;
    th.addEventListener('click', () => sortByColumn(colIndex));
    headerRow.appendChild(th);
  });
  table.appendChild(headerRow);

  const filtered = applyFilters(dataRows);
  filtered.forEach((row, index) => {
    const tr = document.createElement('tr');
    if (index === 0) tr.classList.add('top-player');

    row.forEach((cell, colIndex) => {
      if (colIndex === 0) return; // Skip first column
      const td = document.createElement('td');
      td.textContent = cell;

      // Highlight delta columns
      if (!isNaN(cell) && headers[colIndex].toLowerCase().includes('delta')) {
        const val = parseFloat(cell);
        if (val > 0) td.classList.add('delta-up');
        else if (val < 0) td.classList.add('delta-down');
      }

      tr.appendChild(td);
    });
    table.appendChild(tr);
  });

  tableContainer.innerHTML = '';
  tableContainer.appendChild(table);
}
